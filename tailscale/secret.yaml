apiVersion: v1
kind: Secret
metadata:
  name: tailscale-auth
  namespace: tailscale
  annotations:
    vault.hashicorp.com/agent-inject: "true"
    vault.hashicorp.com/role: "tailscale-role"
    vault.hashicorp.com/agent-inject-secret-TS_AUTHKEY: "kv/data/tailscale/ts-auth"
    vault.hashicorp.com/agent-inject-template-TS_AUTHKEY: |
      {{- with secret "kv/data/tailscale/ts-auth" -}}
      {{ .Data.data.TS_AUTHKEY }}
      {{- end }}
type: Opaque
stringData:
  TS_AUTHKEY: "placeholder"  # Will be overwritten by Vault
